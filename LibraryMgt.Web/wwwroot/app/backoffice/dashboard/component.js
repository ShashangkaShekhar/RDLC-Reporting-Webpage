"use strict";var __decorate=this&&this.__decorate||function(t,e,r,a){var o,i=arguments.length,n=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,r,a);else for(var s=t.length-1;0<=s;s--)(o=t[s])&&(n=(i<3?o(n):3<i?o(e,r,n):o(e,r))||n);return 3<i&&n&&Object.defineProperty(e,r,n),n},__metadata=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=require("@angular/core"),router_1=require("@angular/router"),platform_browser_1=require("@angular/platform-browser"),angular_highcharts_1=require("angular-highcharts"),service_1=require("../../shared/service"),DashboardComponent=function(){function t(t,e,r){this.router=t,this.titleService=e,this._dataService=r,this.totalBook=0,this.totalMember=0,this.totalIssued=0,this.totalReturned=0,this._getBUrl="/api/report/getbookchart",this._getMUrl="/api/report/getmemberchart",this._getSUrl="/api/dashboard/getallsummary"}return t.prototype.ngOnInit=function(){this.titleService.setTitle("Library System | Dashboard"),this.getSummary(),this.getBookChart(),this.getMemberChart()},t.prototype.loadScripts=function(){for(var t=["assets/js/index.js"],e=0;e<t.length;e++){var r=document.createElement("script");r.src=t[e],r.type="text/javascript",r.async=!1,r.charset="utf-8",document.getElementsByTagName("body")[0].appendChild(r)}},t.prototype.getSummary=function(){var e=this;this._dataService.getall(this._getSUrl).subscribe(function(t){e.summaryTotal=t,e.totalBook=e.summaryTotal.totalBook,e.totalMember=e.summaryTotal.totalMember,e.totalIssued=e.summaryTotal.totalIssued,e.totalReturned=e.summaryTotal.totalReturned},function(t){})},t.prototype.getBookChart=function(){var a=this;this._dataService.getall(this._getBUrl).subscribe(function(t){a.bchart=t;for(var e=[],r=0;r<a.bchart.length;r++)e.push({name:a.bchart[r].bname,y:a.bchart[r].nissue,sliced:!0,selected:!0});a.bkchart=new angular_highcharts_1.Chart({chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie",backgroundColor:null,options3d:{enabled:!0,alpha:45,beta:0}},title:{text:"Book Issued"},subtitle:{text:"Issued Pie-Chart!"},tooltip:{pointFormat:"{series.name}: <b>{point.y}</b>"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",depth:35,dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f} %"}}},series:[{name:"Total Issued",data:e}]})},function(t){})},t.prototype.getMemberChart=function(){var a=this;this._dataService.getall(this._getMUrl).subscribe(function(t){a.mchart=t;for(var e=[],r=0;r<a.mchart.length;r++)e.push({name:a.mchart[r].mname,y:a.mchart[r].ntrans,sliced:!0,selected:!0});a.mkchart=new angular_highcharts_1.Chart({chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie",backgroundColor:null,options3d:{enabled:!0,alpha:45,beta:0}},title:{text:"Member Performance"},subtitle:{text:"Reading Pie-Chart!"},tooltip:{pointFormat:"{series.name}: <b>{point.y}</b>"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",depth:35,dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f} %"}}},series:[{name:"Total Reading",data:e}]})},function(t){})},t=__decorate([core_1.Component({selector:"ng-dashboard",templateUrl:"./app/backoffice/dashboard/component.html",providers:[service_1.DataService]}),__metadata("design:paramtypes",[router_1.Router,platform_browser_1.Title,service_1.DataService])],t)}();exports.DashboardComponent=DashboardComponent;